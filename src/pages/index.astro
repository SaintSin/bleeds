---
import { Image } from "astro:assets";

import Layout from "../layouts/Layout.astro";
import Card from "../components/Card.astro";
import image1 from "@images/placeholders/cat_1.jpg";
import image2 from "@images/placeholders/cat_2.jpg";
import image3 from "@images/placeholders/cat_3.jpg";
import image4 from "@images/placeholders/cat_4.jpg";
---

<Layout title="Welcome to Astro.">
  <section class="page">
    <h1>Full Bleed Images Two Column</h1>
    <p class="txt-center">
      Images are resized to cover the height of the parent element.<br /> Based on
      <a href="https://www.youtube.com/watch?v=Ivk8Blw2VTI" target="_blank"
        >this technique by Kevin Powell</a
      >.
    </p>
  </section>
</Layout>

<section class="full-width-split-screen">
  <div class="primary">
    <h2>A Picture 1</h2><p>
      Sunt nisi aute pariatur labore tempor magna dolore eu. Cillum pariatur
      anim commodo sint exercitation sint velit. Veniam dolore magna enim velit
      aute aute dolor irure tempor.
    </p>
    <p>
      Aliqua deserunt laboris eiusmod et id occaecat reprehenderit adipisicing
      enim amet incididunt commodo veniam nostrud. Irure labore laborum anim
      velit ullamco. In irure esse Lorem dolore et.
    </p>
    <p>
      Nulla non minim sunt anim tempor adipisicing nisi anim incididunt enim.
      Deserunt est qui ex esse qui laborum est dolore cillum. Pariatur enim
      irure exercitation magna cillum id exercitation nisi deserunt do consequat
      quis voluptate. Commodo ut ad pariatur duis sunt velit veniam minim.
    </p>
  </div>
  <Image
    src={image1}
    format={"avif"}
    widths={[400, 800, 1200]}
    sizes={`(max-width: 600px) 400px, (max-width: 1000px) 800px, 1200px`}
    alt="Cat lying down staring at camera"
    loading={"eager"}
  />
</section>

<section class="full-width-split-screen">
  <Image
    src={image2}
    format={"avif"}
    widths={[400, 800, 1200]}
    sizes={`(max-width: 600px) 400px, (max-width: 1000px) 800px, 1200px`}
    alt="A cute kitten"
    loading={"eager"}
  />
  <div class="secondary">
    <h2>A Picture 2</h2>
    <p>
      Et esse laborum minim occaecat minim dolor nulla elit officia ut ea id.
      Lorem deserunt officia nulla dolor ullamco in Lorem Lorem eu. Ad sunt do
      laboris id exercitation enim. Cupidatat nisi ad incididunt ullamco
      consectetur est aliquip mollit tempor ex Lorem. Veniam ad mollit veniam
      esse officia esse commodo elit aute nisi enim veniam laboris sit. Enim
      enim officia Lorem ipsum est qui incididunt incididunt sit in eiusmod.
    </p>
    <p>
      Nulla non minim sunt anim tempor adipisicing nisi anim incididunt enim.
      Deserunt est qui ex esse qui laborum est dolore cillum. Pariatur enim
      irure exercitation magna cillum id exercitation nisi deserunt do consequat
      quis voluptate. Commodo ut ad pariatur duis sunt velit veniam minim.
    </p>

    <p>
      Do sunt ex do veniam consectetur enim. Ex ut irure excepteur dolor duis et
      mollit amet proident velit cupidatat proident in eiusmod. Aliqua aliquip
      mollit sit nisi amet reprehenderit Lorem eiusmod magna occaecat magna.
      Duis amet aliquip dolore dolore voluptate consectetur. Deserunt commodo do
      laboris elit culpa sint ut. Deserunt reprehenderit ex pariatur deserunt
      aute laborum reprehenderit aliquip aliqua excepteur ut enim nisi.
    </p>
  </div>
</section>

<section class="full-width-split-screen">
  <div class="tertiary">
    <h2>A Picture 3</h2><p>
      Elit dolor voluptate cupidatat labore qui adipisicing cillum. Proident
      dolore ad magna anim nulla aliqua veniam. Deserunt deserunt eiusmod in do
      labore dolore anim. Ea esse mollit est in dolor qui cillum amet veniam
      sunt excepteur ad id. Deserunt pariatur ullamco non est et ut dolore. Esse
      eiusmod anim velit reprehenderit occaecat incididunt dolor laboris.
    </p>
    <p>
      Nulla non minim sunt anim tempor adipisicing nisi anim incididunt enim.
      Deserunt est qui ex esse qui laborum est dolore cillum. Pariatur enim
      irure exercitation magna cillum id exercitation nisi deserunt do consequat
      quis voluptate. Commodo ut ad pariatur duis sunt velit veniam minim.
    </p>
    <p>
      Nulla non minim sunt anim tempor adipisicing nisi anim incididunt enim.
      Deserunt est qui ex esse qui laborum est dolore cillum. Pariatur enim
      irure exercitation magna cillum id exercitation nisi deserunt do consequat
      quis voluptate. Commodo ut ad pariatur duis sunt velit veniam minim.
    </p>
  </div>
  <Image
    src={image3}
    format={"avif"}
    widths={[400, 800, 1200]}
    sizes={`(max-width: 600px) 400px, (max-width: 1000px) 800px, 1200px`}
    alt="Playful cats"
  />
</section>

<section class="full-width-split-screen">
  <Image
    src={image4}
    format={"avif"}
    widths={[400, 800, 1200]}
    sizes={`(max-width: 600px) 400px, (max-width: 1000px) 800px, 1200px`}
    alt="Ginger kitten in grassy field"
  />
  <div class="quaternary">
    <h2>A Picture 4</h2>
    <p>
      Et esse laborum minim occaecat minim dolor nulla elit officia ut ea id.
      Lorem deserunt officia nulla dolor ullamco in Lorem Lorem eu. Ad sunt do
      laboris id exercitation enim. Cupidatat nisi ad incididunt ullamco
      consectetur est aliquip mollit tempor ex Lorem. Veniam ad mollit veniam
      esse officia esse commodo elit aute nisi enim veniam laboris sit. Enim
      enim officia Lorem ipsum est qui incididunt incididunt sit in eiusmod.
    </p>
    <p>
      Nulla non minim sunt anim tempor adipisicing nisi anim incididunt enim.
      Deserunt est qui ex esse qui laborum est dolore cillum. Pariatur enim
      irure exercitation magna cillum id exercitation nisi deserunt do consequat
      quis voluptate. Commodo ut ad pariatur duis sunt velit veniam minim.
    </p>

    <p>
      Do sunt ex do veniam consectetur enim. Ex ut irure excepteur dolor duis et
      mollit amet proident velit cupidatat proident in eiusmod. Aliqua aliquip
      mollit sit nisi amet reprehenderit Lorem eiusmod magna occaecat magna.
      Duis amet aliquip dolore dolore voluptate consectetur. Deserunt commodo do
      laboris elit culpa sint ut. Deserunt reprehenderit ex pariatur deserunt
      aute laborum reprehenderit aliquip aliqua excepteur ut enim nisi.
    </p>
  </div>
</section>
<section class="full-width-split-screen">
  <Image
    src={image3}
    format={"avif"}
    widths={[400, 800, 1200]}
    sizes={`(max-width: 600px) 400px, (max-width: 1000px) 800px, 1200px`}
    alt="Mice run away from this duo"
  />
  <Image
    src={image4}
    format={"avif"}
    widths={[400, 800, 1200]}
    sizes={`(max-width: 600px) 400px, (max-width: 1000px) 800px, 1200px`}
    alt="Ginger kitten in grassy field"
  />
</section>
<section class="full-width-split-screen">
  <div class="quaternary">
    <h3>First</h3>
    <p>
      Dolor laborum eu ullamco fugiat labore eiusmod qui excepteur minim aute
      laboris dolore sit labore. Mollit pariatur nisi tempor est minim ipsum.
      Eiusmod veniam nostrud veniam dolore. Ex fugiat deserunt minim aliquip
      commodo et deserunt labore. Nisi pariatur culpa minim id voluptate aute
      mollit tempor magna.
    </p>
  </div>
  <div class="primary">
    <h3>Second</h3>
    <p>
      Dolor laborum eu ullamco fugiat labore eiusmod qui excepteur minim aute
      laboris dolore sit labore. Mollit pariatur nisi tempor est minim ipsum.
      Eiusmod veniam nostrud veniam dolore. Ex fugiat deserunt minim aliquip
      commodo et deserunt labore. Nisi pariatur culpa minim id voluptate aute
      mollit tempor magna.
    </p>
  </div>
</section>

<section class="wrapper">
  <p class="lede">
    Officia laborum exercitation aliquip adipisicing nisi laborum eiusmod et
    nulla. Adipisicing occaecat exercitation magna sunt reprehenderit Lorem.
    Consequat ea et ex commodo consectetur eu sunt laboris Lorem dolor. Fugiat
    dolore sint et laboris in elit.
  </p>
  <hr />
  <p>
    Non aliqua ea proident cillum officia est dolor adipisicing consequat sint
    nostrud qui cillum. Sit sit ullamco esse ad do mollit enim labore. Fugiat
    laboris nostrud ea irure culpa est nostrud consequat nisi ullamco. Aliquip
    duis aliqua pariatur ad aute culpa occaecat mollit elit pariatur sit commodo
    elit quis. Do et velit aliqua reprehenderit dolore do ea. Et amet mollit
    culpa excepteur nisi in do. Nisi dolore officia labore ullamco.
  </p>
  <style>
    :root {
      --wrapper-padding-inline: 2.5rem;
      --wrapper-max-width: 110ch;
      --section-padding-block: 2.5rem;
      --paragraph-max-width: 69ch;
    }
    * {
      /* outline: solid 1px red; */
      font-family: var(--font-sans);
      line-height: var(--font-lineheight-3);
    }
    h1 {
      font-size: 4rem;
      color: var(--teal-10);
    }
    p {
      margin-top: var(--space-s);
      font-size: var(--step-0);
      color: var(--gray-11);
      max-width: var(--paragraph-max-width);
    }
    .lede {
      font-size: var(--step-1);
      font-weight: 600;
    }
    .primary {
      background: var(--teal-1);
    }
    .secondary {
      background: var(--lime-2);
    }
    .tertiary {
      background: var(--teal-4);
    }
    .quaternary {
      background: var(--lime-4);
    }
    .page {
      display: grid;
      height: 100vh;
      background: var(--lime-2);
      align-content: center;
      text-align: center;
    }
    .wrapper {
      max-width: var(--wrapper-max-width);
      margin-inline: auto;
      padding-inline: var(--wrapper-padding-inline);
    }
    .txt-center {
      text-align: center;
      display: inline-block;
      margin-inline: auto;
    }
  </style>

  <style is:global>
    /* Two Column Layout */
    /* In Astro this must be set as a global style, otherwise it doesn't compile correctly */

    .full-width-split-screen {
      padding-block: 0;
    }
    .full-width-split-screen img {
      /* outline: 2px solid red; */
      object-fit: cover;
    }

    .full-width-split-screen > :not(img) {
      padding-inline: var(--wrapper-padding-inline);
      padding-block: var(--wrapper-padding-inline);
    }
    @media (min-width: 600px) {
      .full-width-split-screen {
        display: grid;
        grid-template-columns:
          minmax(var(--wrapper-padding-inline), 1fr)
          minmax(0, calc(var(--wrapper-max-width) / 2))
          minmax(0, calc(var(--wrapper-max-width) / 2))
          minmax(var(--wrapper-padding-inline), 1fr);
        position: relative;
      }
      .full-width-split-screen > img:first-child {
        grid-column: 1 / 3;
      }
      .full-width-split-screen > img:last-child {
        grid-column: 3 / -1;
      }
      .full-width-split-screen > :not(img) {
        display: grid;
        align-content: center;
        justify-content: start;
      }
      .full-width-split-screen > :not(img):first-child {
        grid-column: 2 / 3;
      }
      .full-width-split-screen > :not(img):last-child {
        grid-column: 3 / 4;
      }
      .full-width-split-screen > :not(img)::before {
        content: " ";
        position: absolute;
        inset: 0;
        background: inherit;
      }
      .full-width-split-screen > :not(img):first-child::before {
        grid-column: 1 / 2;
      }
      .full-width-split-screen > :not(img):last-child::before {
        grid-column: 4 / 5;
      }
    }
  </style>

  <script>
    const min_screen_width = 600;

    function handleImages() {
      console.log("Function Called");

      if (window.innerWidth > min_screen_width) {
        const fullWidthSplitScreens = document.querySelectorAll(
          ".full-width-split-screen"
        );
        //   console.log("fw");

        fullWidthSplitScreens.forEach((element) => {
          const imgElement = element.querySelector(
            "img"
          ) as HTMLImageElement | null;
          // console.log("ie");
          if (imgElement) {
            console.log("preLis", element.clientHeight);
            imgElement.style.height = `${element.clientHeight}px`;

            imgElement.addEventListener("load", () => {
              imgElement.style.height = `${element.clientHeight}px`;
              console.log("Image loaded and resized!");
            });
          }
        });
      }

      // Remove height styling if window goes below minimum width
      if (window.innerWidth <= min_screen_width) {
        //   console.log("Remove heights");

        const fullWidthSplitScreens = document.querySelectorAll(
          ".full-width-split-screen"
        );
        fullWidthSplitScreens.forEach((element) => {
          const imgElement = element.querySelector(
            "img"
          ) as HTMLImageElement | null;
          if (imgElement) {
            //   console.log("Remove height style");
            imgElement.style.height = "";
          }
        });
      }
    }
    document.addEventListener("astro:page-load", handleImages);
    window.addEventListener("resize", handleImages);
  </script>
</section>
